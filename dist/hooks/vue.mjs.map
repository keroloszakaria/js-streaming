{"version":3,"sources":["../../src/hooks/vue.ts"],"sourcesContent":["import { ref, onMounted, onBeforeUnmount } from \"vue\";\r\nimport { createStream } from \"../index\";\r\nimport { AnyOptions, StreamAPI, StreamStatus } from \"../core/types\";\r\n\r\nexport function useStream(opts: AnyOptions) {\r\n  const stream = ref<StreamAPI | null>(null);\r\n  const status = ref<StreamStatus>(\"idle\");\r\n  const messages = ref<any[]>([]);\r\n\r\n  onMounted(() => {\r\n    const s = createStream(opts);\r\n\r\n    s.on(\"status\", (st: StreamStatus) => (status.value = st));\r\n    s.on(\"message\", (msg: unknown) => messages.value.push(msg));\r\n\r\n    stream.value = s;\r\n  });\r\n\r\n  onBeforeUnmount(() => {\r\n    stream.value?.close();\r\n  });\r\n\r\n  return { stream, status, messages };\r\n}\r\n"],"mappings":";;;;;AAAA,SAAS,KAAK,WAAW,uBAAuB;AAIzC,SAAS,UAAU,MAAkB;AAC1C,QAAM,SAAS,IAAsB,IAAI;AACzC,QAAM,SAAS,IAAkB,MAAM;AACvC,QAAM,WAAW,IAAW,CAAC,CAAC;AAE9B,YAAU,MAAM;AACd,UAAM,IAAI,aAAa,IAAI;AAE3B,MAAE,GAAG,UAAU,CAAC,OAAsB,OAAO,QAAQ,EAAG;AACxD,MAAE,GAAG,WAAW,CAAC,QAAiB,SAAS,MAAM,KAAK,GAAG,CAAC;AAE1D,WAAO,QAAQ;AAAA,EACjB,CAAC;AAED,kBAAgB,MAAM;AACpB,WAAO,OAAO,MAAM;AAAA,EACtB,CAAC;AAED,SAAO,EAAE,QAAQ,QAAQ,SAAS;AACpC;","names":[]}