{"version":3,"sources":["../../src/hooks/react.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { createStream } from \"../index\";\r\nimport { AnyOptions, StreamAPI, StreamStatus } from \"../core/types\";\r\n\r\nexport function useStream(opts: AnyOptions) {\r\n  const [stream, setStream] = useState<StreamAPI | null>(null);\r\n  const [status, setStatus] = useState<StreamStatus>(\"idle\");\r\n  const [messages, setMessages] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    const s = createStream(opts);\r\n\r\n    s.on(\"status\", (st: StreamStatus) => setStatus(st)); // ðŸŸ¢ typed\r\n    s.on(\"message\", (msg: unknown) => setMessages((prev) => [...prev, msg]));\r\n\r\n    setStream(s);\r\n\r\n    return () => {\r\n      s.close();\r\n    };\r\n  }, [opts]);\r\n\r\n  return { stream, status, messages };\r\n}\r\n"],"mappings":";;;;;AAAA,SAAS,WAAW,gBAAgB;AAI7B,SAAS,UAAU,MAAkB;AAC1C,QAAM,CAAC,QAAQ,SAAS,IAAI,SAA2B,IAAI;AAC3D,QAAM,CAAC,QAAQ,SAAS,IAAI,SAAuB,MAAM;AACzD,QAAM,CAAC,UAAU,WAAW,IAAI,SAAgB,CAAC,CAAC;AAElD,YAAU,MAAM;AACd,UAAM,IAAI,aAAa,IAAI;AAE3B,MAAE,GAAG,UAAU,CAAC,OAAqB,UAAU,EAAE,CAAC;AAClD,MAAE,GAAG,WAAW,CAAC,QAAiB,YAAY,CAAC,SAAS,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC;AAEvE,cAAU,CAAC;AAEX,WAAO,MAAM;AACX,QAAE,MAAM;AAAA,IACV;AAAA,EACF,GAAG,CAAC,IAAI,CAAC;AAET,SAAO,EAAE,QAAQ,QAAQ,SAAS;AACpC;","names":[]}